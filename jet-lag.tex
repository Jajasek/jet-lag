\documentclass{book}
\usepackage[czech]{babel}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{wasysym}
\usepackage{xifthen}
\usepackage{pifont}
\usepackage{xcolor}

% If we are not using LuaTeX, we need to set up character encoding:
\usepackage{iftex}
\ifpdftex
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\fi

% We want txfont for card symbols (https://tex.stackexchange.com/a/9642) without changing the math font (https://latex.org/forum/viewtopic.php?t=6262)
%\usepackage{txfonts}
%\usepackage{lmodern}


\newcommand{\ifequals}[3]{\ifthenelse{\equal{#1}{#2}}{#3}{}}
\newcommand{\case}[2]{#1 #2} % Dummy, so \renewcommand has something to overwrite...
\newenvironment{switch}[1]{\renewcommand{\case}{\ifequals{#1}}}{}


\newenvironment{reasoning}{\begin{small}\itshape}{\end{small}}
\newlist{cards}{itemize}{1}
\setlist[cards]{label=\ataribox}
\setlist[itemize]{nosep}

\NewDocumentCommand{\card}{somo}{%
	\edef\tmp{\IfValueT{#2}{[\unexpanded{#2}]}}%
	\expandafter\item\tmp%
	\textbf{%
		#3 %
		(\IfValueTF{#4}{#4}{?}x)%
		\IfBooleanF{#1}{:}%
	}%
}
\newcommand{\cost}{\textbf{Cena za seslání: }}

% Various symbol definitions
\def\cross{\ding{55}}
%\def\srdceplne{\textcolor{red}{\ensuremath{\varheartsuit}}}
%\def\srdceprazdne{\textcolor{red}{\ensuremath{\heartsuit}}}
%\def\karyplne{\textcolor{red}{\ensuremath{\vardiamondsuit}}}
%\def\karyprazdne{\textcolor{red}{\ensuremath{\diamondsuit}}}
%\def\pikyplne{\ensuremath{\spadesuit}}
%\def\pikyprazdne{\ensuremath{\varspadesuit}}
%\def\krizeplne{\ensuremath{\clubsuit}}
%\def\krizeprazdne{\ensuremath{\varclubsuit}}
\newcommand{\cardsymbol}[2]{\textcolor{#1}{\ensuremath{#2}}}
\newcommand{\srdcer}{\cardsymbol{red}{\heartsuit}}
\newcommand{\karyr}{\cardsymbol{red}{\diamondsuit}}
\newcommand{\pikyr}{\cardsymbol{red}{\spadesuit}}
\newcommand{\krizer}{\cardsymbol{red}{\clubsuit}}
\newcommand{\srdceb}{\cardsymbol{blue}{\heartsuit}}
\newcommand{\karyb}{\cardsymbol{blue}{\diamondsuit}}
\newcommand{\pikyb}{\cardsymbol{blue}{\spadesuit}}
\newcommand{\krizeb}{\cardsymbol{blue}{\clubsuit}}

\def\timehiding/{45 minut}  % 3.5h
\def\timepenalty/{15 minut}
\def\timehidingmove/{15 minut}  % 1 h
\def\timeanswerquestion/{10 minut}  % photo: 15 min
\def\timecursetravelvisit/{5 minut}  % 10 min
\def\timecursetravelpenalty/{15 minut}  % 30 min
\def\timecurselemonpenalty/{30 minut}  % 1 h
\def\timecursedoorduration/{1 hodinu}  % 3 h
\def\timecursedoorreattempt/{10 minut}  % 15 min
\def\timecursegambler/{30 minut}  % 1 h
\def\timecursedotcountdown/{10 minut}  % 15 min
\def\timecursedotfreeze/{20 minut}  % 30 min
\def\timecursehangmancooldown/{5 minut}  % 10 min
\def\timecursetumblehit/{10 minut}  % 15 min
\def\timecurseturnright/{30 minut}  % 1 h
\def\timecursecensustaker/{15 minut}  % 30 min
\def\timecursebirdguide/{15 minut}  % 15 min
\def\timecursefellowshipcost/{15 minut}

\def\dist#1mi{%
	\begin{switch}{#1}%
		\case{.25}{100 metrů}%
		\case{.5}{200 metrů}%
		\case{1}{350 metrů}%
		\case{3}{750 metrů}%
		\case{5}{1 kilometr}%
		\case{10}{1.5 kilometru}%
		\case{15}{2 kilometry}%
		\case{25}{2 kilometry}%
		\case{50}{3 kilometry}%
		\case{100}{4 kilometry}%
	\end{switch}%
}



\title{Pravidla her Jet Lag}
\author{Žaneta Lipertová, Jáchym Mierva}
\date{2025}


\begin{document}

\maketitle
\tableofcontents

\chapter{Hide And Seek: Praha}

\section{Příprava hry}

\subsection{Definice herního plánu}\label{herní plán}

\textbf{Herní plán} tvoří právě všechny dopravní prostředky Pražské MHD poháněné výhradně elektřinou a operující v tarifním pásmu P, 0 a B, a linky přívozu. Konkrétně jimi jsou
\begin{itemize}
	\item metro,
	\item tramvaj,
	\item trolejbus,
	\item lanovka,
	\item vlak v pásmech P, 0 a B, a
	\item přívoz.
\end{itemize}
Dále do herního plánu spadají linky náhradní autobusové dopravy nahrazující některý z výše uvedených dopravních prostředků.

V průběhu hry nesmí hráči používat žádné jiné dopravní prostředky. Zároveň se musí pohybovat pouze na \textbf{veřejných místech}, jež jsou a budou volně a zdarma přístupná po celou dobu daného kola. (Toto pravidlo mohou hledači porušit, vyžaduje-li to výslovně kletba, viz sekci \ref{kletby})

Hráči začínají hru na křižovatce ulic Na Florenci a Křižíkova (50.0894986N, 14.4372300E).

\begin{reasoning}
	Určitě chceme začínat ve velkém dopravním uzlu, tj. u jedné z přestupních stanic metra. Z nich jsme vybrali Florenc, protože metro A všichni docela známe a je docela krátké. Bude zajímavé mít možnosti jet někam daleko, kde to tolik neznáme.

	Bude ale lepší nezačínat hned u vchodu do stanice metra. Pak by totiž hledači měli okamžitě informaci o tom, jakým dopravním prostředkem skrývač pojede. Umístili jsme tedy počáteční bod do poloviny cesty mezi Florencí a Masarykovým nádražím.
\end{reasoning}

\subsection{Určení hrací doby}

Hráči se mohou dohodnout na horním limitu hrací doby. Neskončí-li hra do daného okamžiku, hráči si poznamenají aktuální stav hry (tj. pozice, zónu skrývání, karty v ruce skrývače a aktivní kletby s jejich časovači) a drží jej v tajnosti. Hru pak mohou dohrát v jiný vhodný čas.

\subsection{Rozdělení rolí}

Hra probíhá v několika kolech, jejichž počet hráči určí na začátku hry (a to absolutně či na základě časového limitu). Počet kol by měl být větší či roven počtu hráčů.

Pro každé kolo je určen jeden z hráčů, který bude \textbf{skrývačem}. Ostatní hráči zaujmou roli \textbf{hledačů}. Při větším počtu hráčů se hledači mohou rozdělit do \textbf{týmů} (po dvou až třech osobách), pro modifikaci pravidel v takovém případě viz sekci \ref{týmy}. Rozdělení hráčů by mělo být předem určeno pro všechna kola.

\begin{reasoning}
	\textbf{Marek:} čím víš si to čtu tím větší si myslím že by bála zábava kdyby byly dva skrývači (Pokud to počet hráčů povolí). Přijde mi že ten aspekt hry se více užije když tak je někdo s tebou.
	Taky spousta věcí vyžaduje internet a co si pamatuju tak pouze jeden z nás má neomezený internet.
	Doufám že ostatní mají alespoň neomezené volání a SMS

	\textbf{Jáchym a Žanet:} Klidně to povolme, dohodnou-li se skrývači tak.
\end{reasoning}

Skrývač prvního kola obdrží \textbf{balíček karet} (viz sekci \ref{karty}), každý tým hledačů má mapu herního plánu.

Během hry by se tým hledačů neměl rozdělit, je považován za jedinou entitu.

\section{První fáze kola: skrývání}\label{skrývání}

Skrývač má \textbf{\timehiding/} na to, aby se přesunul na pozici dle libosti. Hledači během této doby nesmí získat žádnou informaci o jeho poloze. V okamžiku \timehiding/ po začátku skrývání je deklarována \textbf{zóna skrývání} jako množina všech bodů, které jsou vzdáleny nejvýše \textbf{\dist.5mi} od polopřímky počínající v těžišti Země a procházející aktuální polohou skrývače. Tato zóna \textbf{musí být obsluhována} alespoň jedním z povolených dopravních prostředků. Tímto je myšleno:
\begin{itemize}
	\item zóna skrývání musí obsahovat alespoň jeden vchod do některé stanice metra, nebo
	\item se musí dotýkat alespoň jednoho nástupiště, respektive mola povoleného dopravního prostředku povrchové dopravy.
\end{itemize}
Od této chvíle nemá skrývač povoleno opustit svou zónu skrývání. (Můžeme povolit akutní technické výjimky - například návštěva toalety v blízkosti zóny skrývání, není-li vhodné místo uvnitř zóny. O každém takovém opuštění by však měl skrývač hledače alespoň hrubě informovat.)

\begin{reasoning}
	\textbf{Marek:} co se stane když jsem v dopravním prostředku po uplynutí 45 min a ten mně odveze dále než 200 metrů?

	\textbf{Jáchym:} Musíme se dohodnout, jak řešit obecně situaci, kdy skrývač proti své vůli opustí zónu skrývání. Navrhuji tvrdý postih - okamžitý konec jeho kola s nulovým časem skrývání. Případně by šlo prostě jen požadovat, ať se co nejrychleji vrátí do zóny skrývání.
\end{reasoning}

\subsection{Důsledky porušení pravidel}

Může se stát, že následkem nepředvídatelných okolností (např. náhlé zpoždění spoje) se skrývač nestihne během fáze skrývání dostat na jím vysněnou pozici. I přesto se však zóna skrývání deklaruje \textbf{přesně} po uplynutí \timehiding/ od okamžiku začátku skrývání, avšak s následující výjimkou. Pokud by deklarovaná zóna skrývání nebyla obsluhována žádným z povolených dopravních prostředků, je namísto toho jako střed zóny skrývání považována zastávka, na níž se skrývač naposledy vyskytoval.

Nastane-li situace, že je skrývač následkem nepředvídatelné události proti jeho vůli odvezen dopravním prostředkem mimo zónu skrývání, musí se do ní co nejrychleji vrátit. Zároveň je povinen o této skutečnosti informovat hledače. Tato situace může nastat například v důsledku aplikace předchozího odstavce, či v případě, že se zóna sice validně deklaruje mezi zastávkami dopravního prostředku, kterým skrývač cestuje, avšak on nemá možnost vystoupit před jejím opuštěním.

Při nutnosti použití pravidel této sekce či jiného obdobného opravení hry je od celkového času hledání odečtena penalizace \timepenalty/, a to za každý takový incident.

Tato pravidla není dovoleno vědomě zneužívat. Jejich účelem je pouze opravení hry během nepředvídatelných událostí nezávislých na vůli hráčů.

\section{Druhá fáze kola: hledání}

Okamžitě po skončení fáze skrývání je spuštěn časovač. Hledači vyráží ze stejné počáteční pozice jako skrývač a jejich cílem je co nejdříve skrývače fyzicky najít, přičemž ten má po celou dobu informaci o jejich aktuální poloze (v přesnosti, kterou technologie dovolí). Informace o jeho poloze mohou získávat kladením \textbf{otázek} z množiny uvedené v sekci \ref{otázky}. Skrývač musí na každou otázku odpovědět do \textbf{\timeanswerquestion/}, a to \textbf{pravdivě}.

\begin{reasoning}
	\textbf{Marek:} je nějaký důvod proč by neměl skrývač vždy čekat 10 minut na zodpovězení otázky? Neměl by se spíše v tomto momentu stopnout časovat pro hledače dokud skrývač neodpoví?

	\textbf{Jáchym:} Pravda, že moc důvodů pro to není. Toto pravidlo jsme prostě převzali z originálu. V originální hře myslím skrývač nikdy během odpovídání na otázku nehrál kletby, zahrál je vždy až současně s poskytnutím odpovědi - to občas dávalo motivaci odpovědět rychle. Nevím, jestli to měli jako pevné pravidlo, a nevím, zda ho chceme zavést. Stopovat neustále časovač se mi však nechce, to by mohl být problém z hlediska synchronizace ve chvíli, kdy vypadne internet. A taky by to bylo otravné. Taky nechci dávat žádné pravidlo ve smyslu, že musí odpovědět co nejdřív - pak by čas trvání odpovědi dal hledačům informace.

	Popravdě - co je špatného na tom, mít u všech otázek desetiminutový timeout? Fér to bude a víme, že to generuje zajímavé situace (např. když se rozhoduješ, zda za minutu nastoupit na tramvaj, tak nemáš čas čekat na odpověď).
\end{reasoning}

\begin{reasoning}
	Pohráváme si i s myšlenkou, že by skrývač mohl čas od času lhát. Konkrétně z každých tří (nebo čtyř, bude třeba vyzkoušet) po sobě jdoucích odpovědí by mohla být nejvýše jedna nepravdivá. Více týmů by se uvažovalo odděleně. Za nepravdivou odpověď by skrývač nedostal odměnu.
\end{reasoning}

Hledači však za každou odpověď, kterou dostanou, zaplatí jistou cenu: dají tím skrývači možnost táhnout karty z balíčku. Počet karet, které táhne, závisí na typu otázky (viz sekci \ref{otázky}). Odpovídá-li skrývač na některou otázku opakovaně, může táhnutí karet provést \textbf{dvakrát}.

Skrývač může karty zahrát kdykoliv, kdy to podmínky na nich napsané dovolí, a to i více karet zároveň. Zahrané karty se odhazují do \textbf{odhazovacího balíčku}. V \textbf{ruce} však může mít \textbf{maximálně 6 karet}. Pokud nastane situace, kdy si do ruky může vzít více karet, než je její kapacita, musí přebývající karty (z ruky či nově získané) okamžitě zahrát či odhodit.

Mezi položením otázky a obdržením odpovědi \textbf{nesmí} hledači klást další otázky.

Vstoupí-li kdykoliv během fáze hledání hledači do zóny skrývání, skrývač se \textbf{nesmí pohybovat}. Může se pak stát, že na některé otázky nedokáže odpovědět - tuto informaci musí sdělit namísto odpovědi. I přesto si táhne karty. Odejdou-li hledači ze zóny skrývání, může se skrývač opět začít pohybovat.

\section{Konec kola}

Kolo končí ve chvíli, kdy se hledači dotknou skrývače. Hráči si poznamenají celkový čas hledání společně s časovými bonusy, které skrývač v průběhu kola obdržel díky kartám.

Není-li toto poslední kolo hry, okamžitě začíná fáze skrývání dalšího kola. Dosavadní skrývač předá balíček karet novému skrývači a ten začíná svou fázi skrývání na aktuální pozici všech.

Naopak je-li toto kolo poslední, hra končí. Vítězem je hráč, který v roli skrývače dosáhl nejdelšího času ze všech kol.

\begin{reasoning}
	\textbf{Marek:} jelikož se další kola začínají od pozice posledního schovaného tak má první hráč největší výhodu jelikož má nejvíce možností. Když se pak někdo schová řekněme na konečné tak další hráč nemá na výběr než jet jediným spojem a toho značně využít hledači

	\textbf{Jáchym:} Toto je pravda. Myslím si však, že to není až tak hrozné. Hledači totiž vždycky začínají na stejném místě jako skrývač - takže když je to odlehlejší místo, tak to znesnadní práci i jim. Budou totiž klást otázky méně efektivně. To je ostatně vidět i v originální sérii.
\end{reasoning}


\section{Množina otázek}\label{otázky}

\input{questions.tex}

\section{Balíček karet}\label{karty}

\input{cards.tex}

\section{Modifikace pro hru ve více týmech}\label{týmy}

Rozhodnou-li se hledači rozdělit do více týmů, hra probíhá stejným způsobem s následujícími změnami.

\subsection{Průběh kola}

Týmy hledačů navzájem neznají svou aktuální pozici.

Kolo skončí tehdy, když alespoň jeden z hledačů skrývače dotkne. V tu chvíli je pozice skrývače oznámena všem týmům, které se na tuto pozici nejrychlejším způsobem přesunou. Až poté začne následující kolo.

Dorazí-li však následující skrývač na danou pozici dříve než některý jiný tým, může se rozhodnout začít svou fázi skrývání před jejich příjezdem, uvědomujíce si, že tím riskuje prozrazení informací o své zóně skrývání. Fáze hledání však musí začít až tehdy, když se všechny týmy dostavily na poslední pozici předchozího skrývače.

\subsection{Otázky}

Týmy sdílí jednu množinu otázek. Jakmile tedy jeden z týmů položí nějakou otázku, sdělí tuto skutečnost všem ostatním týmům. Tato otázka je pak i pro ně považována za položenou. Odpověď však dostane pouze ten tým, který otázku položil.

Lhůta skrývače pro zodpovězení otázky může běžet pro několik týmů paralelně.

\subsection{Karty}

Limit počtu karet v ruce skrývače se zvyšuje na 8.

Sesílá-li skrývač kletbu, musí si vybrat pouze jeden tým, na který ji sešle. Pouze na tento tým se pak vážou veškeré podmínky a efekty seslané kletby. Výjimkou jsou takové kletby, které manipulují s množinou otázek - ty afektují všechny týmy.

Akční karty ze své podstaty afektují buďto všechny týmy, nebo žádné.

\end{document}
